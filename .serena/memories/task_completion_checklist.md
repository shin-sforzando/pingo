# タスク完了時のチェックリスト

## 必須確認項目

### 1. コード品質確認

```bash
npm run check
```

- Biomeによるフォーマット・リントがパスすること
- エラー・警告が0件であること

### 2. テスト実行

```bash
npm run test:once
```

- 全てのテストがパスすること
- 新機能には対応するテストが追加されていること
- カバレッジが70%以上を維持していること

### 3. ビルド確認

```bash
npm run build
```

- ビルドが正常に完了すること
- TypeScriptのコンパイルエラーがないこと

### 4. 国際化確認（i18n関連の変更時）

```bash
npm run check:i18n
```

- 翻訳キーの不整合がないこと
- 日本語・英語の両方に対応していること

## 追加確認項目（該当する場合）

### UIコンポーネント追加時

```bash
npm run storybook
```

- 新しいコンポーネントにStorybookストーリーが追加されていること
- 各バリエーションが正しく表示されること

### E2E関連の変更時

```bash
npm run test:e2e
```

- E2Eテストがパスすること
- モバイル（iPhone）での動作確認

### Docker関連の変更時

```bash
npm run docker
```

- Dockerコンテナが正常に起動すること
- <http://localhost:3000> でアプリケーションが動作すること

## lefthookによる自動チェック

pre-commitフックで以下が自動実行される：

1. git secret hide（シークレットの暗号化）
2. Biomeチェック（ステージされたファイル）
3. テスト実行
4. i18nチェック
5. ビルド
6. knip（未使用の依存関係チェック）

## 重要な注意事項

- **タスクは動作確認が完了するまで「完了」ではない**
- 3回試行しても問題が解決しない場合は、アプローチを見直す
- ユーザーの確認を得てから次のタスクに移る
- エラーや警告は必ず解決する（無視しない）

## メモリバンクの更新タイミング

以下の場合はメモリバンクを更新：

1. 新しいプロジェクトパターンの発見
2. 重要な変更の実装後
3. ユーザーから「update memory bank」の指示
4. コンテキストの明確化が必要な時
