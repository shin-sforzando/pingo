# タスク完了時のチェックリスト

## 必須確認項目

### 1. コード品質確認

```bash
npm run check
```

- Biomeによるフォーマット・リントがパスすること
- エラー・警告が0件であること
- TypeScriptコンパイルエラーがないこと

### 2. テスト実行

```bash
npm run test
```

- 全てのテストがパスすること
- 新機能には対応するテストが追加されていること
- テストカバレッジが適切に維持されていること

### 3. ビルド確認

```bash
npm run build
```

- プロダクションビルドが正常に完了すること
- Next.jsの最適化処理が成功すること
- 静的アセットが正しく生成されること

### 4. 国際化確認（i18n関連の変更時）

```bash
npm run check:i18n
```

- 翻訳キーの不整合がないこと
- 日本語・英語の両方に適切に対応していること
- 未翻訳のキーが存在しないこと

## 追加確認項目（該当する場合）

### UIコンポーネント追加・変更時

```bash
npm run storybook
```

- 新しいコンポーネントにStorybookストーリーが追加されていること
- 各バリエーション（状態、Props）が正しく表示されること
- アクセシビリティが適切に実装されていること

### ブラウザテスト関連の変更時

```bash
npm run test
```

- 全ブラウザテスト（`*.browser.test.tsx`）がパスすること
- webkit（Safari）での動作確認
- 主要なコンポーネント/ページが正常に動作すること

**注**: 従来型Playwright E2Eテスト（`npm run test:e2e`）は設定済みですが、テストファイル（`e2e/*.spec.ts`）は未作成です。
現在のブラウザベーステストはVitest Browser Modeで実装されており、 `npm run test` で実行されます。

### Docker関連の変更時

```bash
npm run docker
```

- Dockerコンテナが正常に起動すること
- <http://localhost:3000> でアプリケーションが動作すること
- 本番環境に近い状態でテストできること

## lefthookによる自動チェック

pre-commitフックで以下が自動実行される:

1. **git secret hide**: シークレットの暗号化
2. **Biomeチェック**: ステージされたファイルの品質確認
3. **テスト実行**: 関連するテストの実行
4. **i18nチェック**: 国際化関連の検証
5. **ビルド**: プロダクションビルドの確認
6. **knip**: 未使用の依存関係チェック

## ブランチ作業の確認事項

### 作業開始時

- `main`ブランチから最新を取得済み
- 適切なブランチ命名規則に従っている（`{0埋め3桁Issue番号}_機能名`）
- Issue番号がある場合は必ずブランチ名に含める

### 作業完了時

- 全ての必須確認項目をクリア
- コミットメッセージが適切（英語、わかりやすい説明）
- 機密情報が含まれていないことを確認
- PR作成前に最終確認

## 重要な注意事項

### 品質保証

- **タスクは動作確認が完了するまで「完了」ではない**
- 3回試行しても問題が解決しない場合は、アプローチを見直す
- ユーザーの確認を得てから次のタスクに移る
- エラーや警告は必ず解決する（無視しない）

### セキュリティ

- APIキーや機密情報をコミットしない
- git-secretによる暗号化を適切に使用
- デバッグログが本番コードに残らないよう注意

### パフォーマンス目標

開発時は以下の目標値を意識する:

- **画像解析応答**: 3秒以内（最大5秒）
- **ページロード**: 2秒以内
- **同時接続**: 最大1,000ユーザー
- **ゲーム参加者**: 最大50人/ゲーム

## メモリバンクの更新タイミング

以下の場合はメモリバンクを更新:

1. **新しいプロジェクトパターンの発見**: アーキテクチャや実装パターンの変更
2. **重要な変更の実装後**: 主要機能の追加や修正
3. **ユーザーからの明示的な指示**: 「update memory bank」の指示時
4. **コンテキストの明確化が必要な時**: 混乱や情報の古さが発見された場合

## 現在の技術仕様

### 必須ツール・バージョン

- **Node.js**: 22系
- **npm**: 最新版
- **Next.js**: 15.5.3
- **React**: 19.1.1
- **TypeScript**: 5系
- **Biome**: 2.2.4

### 推奨IDE設定

- VS Codeでの開発を推奨
- Biome拡張機能の有効化
- TypeScript厳格モードの使用
- Auto-formatの設定
