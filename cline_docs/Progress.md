# 進捗状況

## 現在の状態

**プロジェクトフェーズ**: 計画段階

Pingoプロジェクトは現在、計画段階にあります。要件定義と技術設計が完了し、これからの開発作業の準備が整いました。

> [!NOTE]
> 詳細な要件や設計の情報については、`./cline_docs/FirstPlot.md` と `./cline_docs/TechnicalSpecification.md`を参照してください。
> このファイルには、UIコンポーネントの実装上の懸念点や画面の詳細説明、ユーザーフローの図など、より詳細な情報が含まれています。

## 最近の変更

- プロジェクト要件の整理と技術仕様の策定
- データモデルの設計と修正
- APIエンドポイントの定義
- 画像処理フローの確立
- UI/UXデザインの基本方針決定
- メモリーバンクの作成
- next-intlを用いた多言語対応（日英）の基盤構築
- モバイルファーストのHeaderコンポーネント実装
  - 中央配置されたシステム名「Pingo」
  - 通知ドロワー機能（Drawerコンポーネント）
  - ユーザーメニュー（Popoverコンポーネント）
  - 言語切り替え機能（サーバーサイドアクション）
- Headerコンポーネントの認証状態に基づいた表示制御の実装
  - 認証済み状態：通知アイコンとUserMenuを表示
  - 未認証状態：LanguageSwitcherを表示
  - テストの分割と整理（基本、認証済み、未認証の3ファイル）
- 画面下部固定のFooterコンポーネント実装
  - サービス利用規約へのリンク
  - Hacking Papa画像（[はっきんぐパパ](https://hacking-papa.com)へのリンク付き）
  - 2025年固定のコピーライト表記
- Firebase Authenticationの導入
  - 認証APIエンドポイントの実装（登録、ログイン、ログアウト、更新）
  - 認証APIのテスト実装
  - Firestoreデータベースの作成
- 認証関連のUI/UX改善
  - エラーメッセージの多言語対応（日英）
  - フォーム間切り替え時のエラーメッセージクリア機能
  - フォーム切り替えテストの追加
- ユーザー名のバリデーション条件の一貫性確保
  - 特殊文字（ドット、ドル記号、スラッシュ）の使用制限
  - クライアントサイドとサーバーサイドの両方でのバリデーション実装
  - エラーメッセージの統一（英語版の修正）
  - バリデーションテストの追加
  - パスワード検証のテストは技術的課題（bcryptのモック）により見送り

## 次のステップ

優先度に基づいて、以下の順序で開発を進めていきます：

1. **中優先の開発品質向上**
   - パスワード検証の統合テスト実装
   - 認証系APIや`src/lib/firebase`のテスト実装
   - テスト後にテストデータを削除し、本番環境を汚さないようにする

2. **その他の機能拡充**
   - 多言語対応の拡充（残りの画面やコンポーネントの翻訳キー追加）
   - 基本コンポーネントの実装と拡充
   - Firestoreのコレクション設計の詳細実装とセキュリティルール設定

## アクティブな決定事項と検討事項

### 決定済み事項

1. 技術スタック
   - フロントエンド: Next.js (App Router) + React 19 + TypeScript 5 + Tailwind CSS 4
   - バックエンド: Node.js 22 + Firebase (Authentication, Firestore, Storage)
   - AI/ML: Google Gemini API
   - デプロイ: Docker → Google Cloud Run

2. データモデル
   - ユーザー、ゲーム、ビンゴボード、提出物などの基本構造を定義
   - Firestoreのコレクション設計を完了

3. API設計
   - RESTful APIエンドポイントの定義
   - 画像処理フローの確立（署名付きURL方式）

4. UI/UXデザイン
   - カラーパレット: #08d9d6, #252a34, #ff2e63, #eaeaea
   - フォント: M PLUS Rounded 1c, M PLUS 1 Code
   - モバイルファーストのレスポンシブデザイン

5. 多言語対応
   - next-intlを使用した日本語と英語の2言語対応
   - デフォルト言語は日本語
   - 翻訳リソースはJSON形式で管理
   - Cookieを使用したユーザー言語設定の保存
   - Storybookでの多言語対応テスト環境も整備済み

6. テスト
   - Vitest
   - Playwright
   - Storybook Test

7. 開発ツール
   - コード品質: Biome.js
   - Git フック: Lefthook

### 検討中の事項

現時点では、主要な検討事項はすべて決定済みです。今後の開発過程で新たな検討事項が発生した場合は、ここに追加していきます。

## 残りの作業

GitHub IssueとMilestoneを確認してください。

## 既知の問題

認証機能の実装において、以下の問題が確認されています。優先度順に対応していきます：

1. **パスワード検証の不備**: アカウント作成からログインに関する正常系、準正常系の統合テストがない。テスト後にテストデータを削除し、本番環境を汚さないようにする
2. **テストカバレッジの不足**: 認証系APIや `src/lib/firebase` 以下のソースコードに関するテストが不足。
